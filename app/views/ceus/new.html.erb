<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      
      <div class="card shadow-sm">
        <div class="card-header bg-white py-3">
          <h4 class="mb-0">Log CEU Activity</h4>
        </div>
        
        <div class="card-body">
          <%= form_with model: @ceu, local: true, class: "needs-validation" do |f| %>
            
            <% if @ceu.errors.any? %>
              <div class="alert alert-danger">
                <h6 class="alert-heading">Please fix the following errors:</h6>
                <ul class="mb-0 ps-3">
                  <% @ceu.errors.full_messages.each do |msg| %>
                    <li><%= msg %></li>
                  <% end %>
                </ul>
              </div>
            <% end %>

            <!-- Hidden field to track if we need to delete a saved event -->
            <% if @remove_saved_id.present? %>
              <%= hidden_field_tag :remove_saved_id, @remove_saved_id %>
              <div class="alert alert-info small mb-3">
                <i class="bi bi-info-circle-fill me-2"></i>
                We've pre-filled the details from your saved event.
              </div>
            <% end %>

            <div class="mb-3">
              <%= f.label :title, "Activity / Class Title", class: "form-label" %>
              <%= f.text_field :title, class: "form-control", placeholder: "e.g. Advanced Ethics in Nursing" %>
            </div>

            <div class="row g-3 mb-3">
              <div class="col-md-6">
                <%= f.label :date, "Date Completed", class: "form-label" %>
                <%= f.date_field :date, class: "form-control" %>
              </div>
              <div class="col-md-6">
                <%= f.label :duration, "Credits / Hours", class: "form-label" %>
                <%= f.number_field :duration, step: 0.1, class: "form-control", placeholder: "1.0" %>
              </div>
            </div>

            <div class="mb-4">
              <%= f.label :certificate, "Upload Certificate / Proof", class: "form-label" %>
              <%= f.file_field :certificate, class: "form-control" %>
              <div class="form-text">Accepted formats: PDF, JPG, PNG. Max size 5MB.</div>
            </div>

            <div class="d-flex justify-content-end gap-2 border-top pt-3">
              <%= link_to "Cancel", dashboard_path, class: "btn btn-outline-secondary" %>
              <%= f.submit "Save Record", class: "btn btn-success" %>
            </div>
            
          <% end %>
        </div>
      </div>

    </div>
  </div>
</div>